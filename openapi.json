{"openapi":"3.1.0","info":{"title":"ResQNet API","version":"1.0.0"},"paths":{"/auth/signup":{"post":{"tags":["auth"],"summary":"Signup","operationId":"signup_auth_signup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/login":{"post":{"tags":["auth"],"summary":"Login","operationId":"login_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/logout":{"post":{"tags":["auth"],"summary":"Logout","operationId":"logout_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/auth/phone/send-otp":{"post":{"tags":["auth"],"summary":"Phone Send Otp","operationId":"phone_send_otp_auth_phone_send_otp_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneSendRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/phone/verify-otp":{"post":{"tags":["auth"],"summary":"Phone Verify Otp","operationId":"phone_verify_otp_auth_phone_verify_otp_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneVerifyRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports":{"post":{"tags":["reports"],"summary":"Submit Report","operationId":"submit_report_reports_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["reports"],"summary":"List Reports","operationId":"list_reports_reports_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"source","in":"query","required":false,"schema":{"type":"string","title":"Source"}},{"name":"event_id","in":"query","required":false,"schema":{"type":"string","title":"Event Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports/{report_id}":{"get":{"tags":["reports"],"summary":"Get Report","operationId":"get_report_reports__report_id__get","parameters":[{"name":"report_id","in":"path","required":true,"schema":{"type":"string","title":"Report Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/events":{"get":{"tags":["events"],"summary":"List Events","operationId":"list_events_events_get","parameters":[{"name":"active_only","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Active Only"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"severity","in":"query","required":false,"schema":{"type":"string","title":"Severity"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/events/nearby":{"get":{"tags":["events"],"summary":"Nearby Events","description":"Mobile app uses this to show alerts near user's location.","operationId":"nearby_events_events_nearby_get","parameters":[{"name":"lat","in":"query","required":true,"schema":{"type":"number","title":"Lat"}},{"name":"lng","in":"query","required":true,"schema":{"type":"number","title":"Lng"}},{"name":"radius_km","in":"query","required":false,"schema":{"type":"number","default":5.0,"title":"Radius Km"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/events/{event_id}":{"get":{"tags":["events"],"summary":"Get Event","operationId":"get_event_events__event_id__get","parameters":[{"name":"event_id","in":"path","required":true,"schema":{"type":"string","title":"Event Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/events/{event_id}/resolve":{"patch":{"tags":["events"],"summary":"Resolve Event","description":"Mark event as inactive (resolved).","operationId":"resolve_event_events__event_id__resolve_patch","parameters":[{"name":"event_id","in":"path","required":true,"schema":{"type":"string","title":"Event Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/rescue/units":{"get":{"tags":["rescue"],"summary":"List Units","operationId":"list_units_rescue_units_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"type":"string","title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/rescue/allocate":{"post":{"tags":["rescue"],"summary":"Allocate Rescue","description":"Find and dispatch nearest available unit to the event.","operationId":"allocate_rescue_rescue_allocate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllocateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/rescue/units/{unit_id}/status":{"patch":{"tags":["rescue"],"summary":"Update Unit Status","description":"Mark unit as available/busy. Call when unit completes a job.","operationId":"update_unit_status_rescue_units__unit_id__status_patch","parameters":[{"name":"unit_id","in":"path","required":true,"schema":{"type":"string","title":"Unit Id"}},{"name":"status","in":"query","required":true,"schema":{"type":"string","title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/grid":{"get":{"tags":["grid"],"summary":"Get Grid","description":"All grid cells — dashboard uses this for the heatmap.","operationId":"get_grid_grid_get","parameters":[{"name":"min_risk","in":"query","required":false,"schema":{"type":"number","default":0,"title":"Min Risk"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/grid/nearby":{"get":{"tags":["grid"],"summary":"Get Nearby Grid","description":"Mobile app: grid cells near the user to show local risk.","operationId":"get_nearby_grid_grid_nearby_get","parameters":[{"name":"lat","in":"query","required":true,"schema":{"type":"number","title":"Lat"}},{"name":"lng","in":"query","required":true,"schema":{"type":"number","title":"Lng"}},{"name":"radius_km","in":"query","required":false,"schema":{"type":"number","default":3.0,"title":"Radius Km"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/predictions":{"get":{"tags":["predictions"],"summary":"Get Predictions","description":"Returns active early warnings across all events.","operationId":"get_predictions_predictions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/simulation/spread":{"post":{"tags":["simulation"],"summary":"Run Spread Simulation","description":"Simulate disaster spreading to adjacent grid cells.\nWrites updated risk scores to grid_risk table.","operationId":"run_spread_simulation_simulation_spread_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SpreadRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/simulation/compare":{"post":{"tags":["simulation"],"summary":"Run Response Comparison","description":"Compare ResQNet smart dispatch vs naive dispatch.\nReturns time saved and projected casualty impact.","operationId":"run_response_comparison_simulation_compare_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompareRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/dashboard/stats":{"get":{"tags":["dashboard"],"summary":"Get Stats","description":"High-level summary: event counts, report counts, unit availability.","operationId":"get_stats_dashboard_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/dashboard/feed":{"get":{"tags":["dashboard"],"summary":"Get Live Feed","description":"Latest activity feed for dashboard sidebar.","operationId":"get_live_feed_dashboard_feed_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/external/ingest":{"post":{"tags":["external"],"summary":"Ingest Signal","description":"Inject an external signal (news article, social hit, weather alert).\nBehaves like /reports but for non-human sources.\nAuto-clusters into nearest event or creates one.","operationId":"ingest_signal_external_ingest_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExternalSignal"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/external/ingest/bulk":{"post":{"tags":["external"],"summary":"Ingest Bulk","description":"Ingest multiple signals at once — useful for demo seeding.","operationId":"ingest_bulk_external_ingest_bulk_post","requestBody":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ExternalSignal"},"type":"array","title":"Signals"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/whatsapp/webhook":{"post":{"tags":["whatsapp"],"summary":"Whatsapp Webhook","operationId":"whatsapp_webhook_whatsapp_webhook_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_whatsapp_webhook_whatsapp_webhook_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/whatsapp/status":{"get":{"tags":["whatsapp"],"summary":"Bot Status","description":"Check bot config and how many citizens can receive broadcasts.","operationId":"bot_status_whatsapp_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/social/events/{event_id}/confirm":{"post":{"tags":["social"],"summary":"Confirm Event","operationId":"confirm_event_social_events__event_id__confirm_post","parameters":[{"name":"event_id","in":"path","required":true,"schema":{"type":"string","title":"Event Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfirmRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/social/observe":{"post":{"tags":["social"],"summary":"Post Observation","operationId":"post_observation_social_observe_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ObservationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/social/feed":{"get":{"tags":["social"],"summary":"Community Feed","operationId":"community_feed_social_feed_get","parameters":[{"name":"lat","in":"query","required":true,"schema":{"type":"number","title":"Lat"}},{"name":"lng","in":"query","required":true,"schema":{"type":"number","title":"Lng"}},{"name":"radius_km","in":"query","required":false,"schema":{"type":"number","default":10.0,"title":"Radius Km"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/social/events/{event_id}/confirmations":{"get":{"tags":["social"],"summary":"Get Confirmations","operationId":"get_confirmations_social_events__event_id__confirmations_get","parameters":[{"name":"event_id","in":"path","required":true,"schema":{"type":"string","title":"Event Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/news":{"get":{"tags":["news"],"summary":"Get News","operationId":"get_news_news_get","parameters":[{"name":"disaster_type","in":"query","required":false,"schema":{"type":"string","title":"Disaster Type"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/media/upload":{"post":{"tags":["media"],"summary":"Upload Image","operationId":"upload_image_media_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_image_media_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/media/list":{"get":{"tags":["media"],"summary":"List Images","description":"List uploaded images from storage bucket.","operationId":"list_images_media_list_get","parameters":[{"name":"disaster_type","in":"query","required":false,"schema":{"type":"string","title":"Disaster Type"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AllocateRequest":{"properties":{"event_id":{"type":"string","title":"Event Id"}},"type":"object","required":["event_id"],"title":"AllocateRequest"},"Body_upload_image_media_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"latitude":{"type":"number","title":"Latitude"},"longitude":{"type":"number","title":"Longitude"},"disaster_type":{"type":"string","title":"Disaster Type","default":"other"},"report_id":{"type":"string","title":"Report Id"},"user_id":{"type":"string","title":"User Id"}},"type":"object","required":["file","latitude","longitude"],"title":"Body_upload_image_media_upload_post"},"Body_whatsapp_webhook_whatsapp_webhook_post":{"properties":{"From":{"type":"string","title":"From"},"Body":{"type":"string","title":"Body","default":""},"Latitude":{"type":"string","title":"Latitude"},"Longitude":{"type":"string","title":"Longitude"}},"type":"object","required":["From"],"title":"Body_whatsapp_webhook_whatsapp_webhook_post"},"CompareRequest":{"properties":{"event_id":{"type":"string","title":"Event Id"}},"type":"object","required":["event_id"],"title":"CompareRequest"},"ConfirmRequest":{"properties":{"latitude":{"type":"number","title":"Latitude"},"longitude":{"type":"number","title":"Longitude"},"user_id":{"type":"string","title":"User Id"}},"type":"object","required":["latitude","longitude"],"title":"ConfirmRequest"},"ExternalSignal":{"properties":{"source":{"type":"string","title":"Source"},"latitude":{"type":"number","title":"Latitude"},"longitude":{"type":"number","title":"Longitude"},"disaster_type":{"type":"string","title":"Disaster Type"},"severity_score":{"type":"number","title":"Severity Score","default":0},"description":{"type":"string","title":"Description"}},"type":"object","required":["source","latitude","longitude","disaster_type"],"title":"ExternalSignal"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"LoginRequest"},"ObservationRequest":{"properties":{"latitude":{"type":"number","title":"Latitude"},"longitude":{"type":"number","title":"Longitude"},"disaster_type":{"type":"string","title":"Disaster Type"},"observation":{"type":"string","title":"Observation"},"user_id":{"type":"string","title":"User Id"}},"type":"object","required":["latitude","longitude","disaster_type","observation"],"title":"ObservationRequest"},"PhoneSendRequest":{"properties":{"phone":{"type":"string","title":"Phone"}},"type":"object","required":["phone"],"title":"PhoneSendRequest"},"PhoneVerifyRequest":{"properties":{"phone":{"type":"string","title":"Phone"},"otp":{"type":"string","title":"Otp"},"name":{"type":"string","title":"Name"}},"type":"object","required":["phone","otp"],"title":"PhoneVerifyRequest"},"ReportRequest":{"properties":{"source":{"type":"string","title":"Source"},"latitude":{"type":"number","title":"Latitude"},"longitude":{"type":"number","title":"Longitude"},"disaster_type":{"type":"string","title":"Disaster Type"},"description":{"type":"string","title":"Description"},"people_count":{"type":"integer","title":"People Count","default":1},"injuries":{"type":"boolean","title":"Injuries","default":false},"weather_severity":{"type":"number","title":"Weather Severity","default":0}},"type":"object","required":["source","latitude","longitude","disaster_type"],"title":"ReportRequest"},"SignupRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"},"name":{"type":"string","title":"Name"},"role":{"type":"string","title":"Role","default":"citizen"},"phone":{"type":"string","title":"Phone"}},"type":"object","required":["email","password","name"],"title":"SignupRequest"},"SpreadRequest":{"properties":{"event_id":{"type":"string","title":"Event Id"}},"type":"object","required":["event_id"],"title":"SpreadRequest"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}